from datetime import datetime, timedelta

class Task: 
    def __init__(self, title, deadline):
        self.title = title
        self.deadline = deadline
        
        
    def parse_deadline_string(date_str, time_str):
        try:
            comb_str = date_str + "" + time_str
            deadline_obj = datetime.strptime(comb_str, "%Y-%m-%d %H:%M")
            return deadline_obj
        except ValueError:
            return None
        
    def get_time_remaining(deadline: datetime) -> timedelta: 
        now = datetime.now()
        
        if deadline < now:
            return timedelta(seconds=0)
        
        return deadline - now 
    
    def format_timedealta(td: timedelta) -> str: 
        
        total_seconds = int(td.total_seconds)
        
        days = total_seconds // 86400
        hours = (total_seconds % 86400) // 3600 
        minutes = (total_seconds % 3600) // 60
        seconds = total_seconds % 60
        
        if days > 0: 
            return f"{days}d {hours:02}h {minutes:02}m {seconds:02}s"
        elif hours > 0:
            return f"{hours:02}h {minutes:02}m {seconds:02}s"
        else:
            return f"{minutes:02}m {seconds:02}s"
        
         
    
        
        
        